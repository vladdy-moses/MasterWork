\section{Программное обеспечение модели}

\subsection{Модуль интеграции РИАС ЖКХ с ГИС ЖКХ}

\subsubsection{Общее описание}

Был разработан модуль интеграции <<РИАС ЖКХ. Модуль интеграции с ГИС ЖКХ>>.

Модуль позволяет проводить двусторонний обмен следующими видами информации:
\begin{easylist}
& договоры управления и уставы;
& договоры ресурсоснабжения;
& сведения о домах и помещениях;
& лицевые счета;
& приборы учёта и их показания;
& платёжные документы;
& факты оплат и отзыв платежей;
& перечни работ управляющих организаций;
& проверки ГЖИ и планы проверок.
\end{easylist}

Дополнительно в модуле интеграции с ГИС ЖКХ реализована следующая функциональность:
\begin{easylist}
& получение из ГИС ЖКХ реестра организаций согласно ЕГРЮЛ/ЕГРИП;
& получение из ГИС ЖКХ нормативно-справочной информации (НСИ);
& двусторонний обмен файлами.
\end{easylist}

Программное обеспечение использует следующие технологии информационного взаимодействия:
\begin{easylist}
& SOAP по зашифрованному (алгоритм ГОСТ 34.10-2012, описанный в~\cite{gost3410}) каналу связи с подписью бизнес-данных по xades-bes;
& разбор xml-ответов от веб-сервиса с открытыми данными;
& обмен файлами по зашифрованному каналу связи по принципу REST API;
& парсинг csv-реестров, запакованных в архивах.
\end{easylist}

С программной точки зрения модуль интеграции РИАС ЖКХ с ГИС ЖКХ представляет службу ОС Windows.
Общее количество значимых строк кода превышает 10 тысяч.
При разработки модуля интеграции использовались следующие технологии и библиотеки:
\begin{easylist}
& .NET Framework 4.5;
& язык программирования Visual C\# 6;
& КриптоПРО .NET;
& Json.NET;
& NLog.
\end{easylist}

Модуль разделён на несколько составных частей:
\begin{easylist}
& ядро обмена (AIS.HM.Integration.GIS.Core);
& служба windows (AIS.HM.Integration.GIS.Production);
& тестовый клиент интеграции (AIS.HM.Integration.GIS.Test);
& графический интерфейс для администратора системы и поставщиков информации (AIS.HM.UI.GIS).
\end{easylist}
Каждый компонент программного обеспечения использует модель данных РИАС ЖКХ.
Здесь можно выделить основные сущности РИАС ЖКХ (Организация, Дом, Помещение) и специфичные для модуля (ГИС\_Запрос, ГИС\_Операция, ГИС\_ЛогПлатёжногоШлюза).
Полное описание основных используемых сущностей логической (концептуальной) модели данных представлено в п.~\ref{head:software-gis-entities} в таблице~\ref{tab:software-gis-entities}.

\subsubsection{Механизм информационного обмена}

Основными принципами информационного обмена с ГИС ЖКХ являются:
\begin{easylist}
& поддержание целостности данных, размещённый в РИАС ЖКХ и ГИС ЖКХ;
& максимально быстрая автоматическая выгрузка данных в ГИС ЖКХ;
& интеграция данных из смежных систем, развёрнутых вкупе с РИАС ЖКХ, и дальнейшая передача их в ГИС ЖКХ;
& гарантированность раскрытия информации в ГИС ЖКХ.
\end{easylist}

Согласно реализации информационного взаимодействия с ГИС ЖКХ, описанному в п.~\ref{descr-gis}, было принято весь процесс отправки сообщений в федеральную систему разделить на следующие этапы:
\begin{enumerate}
	\item Для операции обмена (например, выгрузка договоров или приём домов) определяется набор поставщиков информации, которые имеют право формировать такие запросы.
	\item Для каждого поставщика информации формируется запросы: определяется набор данных, подлежащих обмену, формируются первичные XML-представления запросов (untrusted xml request), формируются пакеты в случае пакетной отправки данных.
	\item В отдельном потоке для одиночных запросов или в текущем потоке для пакетных запросов XML-представления подписываются по ГОСТ 34.10-2012~\cite{gost3410} и отправляются в веб-сервисы ГИС ЖКХ по зашифрованному каналу связи. ГУИД ответа (AckResult.MessageGUID) записывается в хранилище данных РИАС ЖКХ.
	\item В отдельном потоке идёт опрос результатов обработки запроса. Если запрос был обработан, запускается необходимый обработчик, который зависит от операции обмена и веб-сервиса.
\end{enumerate}

Также была реализована поэтапная синхронизация поставщиков информации.
Это означает, что если поставщик информации передал в ГИС ЖКХ необходимые полномочия на раскрытие данных региональной информационной системе и разрешил в РИАС ЖКХ обмен, то в следующий сеанс обмена ничего выгружаться из РИАС ЖКХ в ГИС ЖКХ не будет.
Сначала будут из ГИС ЖКХ приниматься данные по договорам (правоустанавливающие документы на раскрытие информации в разрезе домов), затем в РИАС ЖКХ будут импортированы данные о домах (операция hcs-house-management\\ExportHouseData), затем о данных внутри домов (помещения, лицевые счета, приборы учёта и проч.).
Если ошибок при приёме данных не возникло, статус интеграции поставщика информации сменяется на <<Синхронизация с ГИС ЖКХ завершена>> и включаются операции выгрузки данных из РИАС ЖКХ в федеральную информационную систему.

Для уменьшения нагрузки на сервера формирование и отправка запросов происходит раз в сутки и запускается в 3 часа ночи по времени сервера.
Опрос статуса ответа в ГИС ЖКХ проверяется раз в 5 минут.
Обмен информацией о платежах (фактах оплат) при наличии не отправленных платежей происходит раз в 1 -- 5 минут.

\subsubsection{Синхронизация данных}

При получении данных из федеральной системы их необходимо грамотно сопоставить с данными, которые уже имеются в РИАС ЖКХ.
Например, при получении данных о доме, его подъездах и помещениях, существующие помещения по бизнес-ключу (в данном случае это флаг <<Является жилым>> и номер помещения) необходимо обновлять, новые создавать.
Затем необходимо создать связь записи в РИАС ЖКХ с аналогичной записи в ГИС ЖКХ.
Обычно это делается через специальную сущность fgis.GISEntityCompare, в которой каждой необходимой строке в хранилище данных присваивается ГУИД аналогичной записи в ГИС ЖКХ.
Если в ГИС ЖКХ запись является версионной (а согласно целевой схеме ГИС ЖКХ практически все сущности должны быть версионны), то в fgis.GISEntityCompare записывается корневой ГУИД записи, а ГУИД версии с её номером (при наличии) записывается в сущность fgis.GISEntityVersion.
Иногда ГУИД записи в ГИС ЖКХ сохраняется напрямую в сущности РИАС ЖКХ без использования fgis.GISEntityCompare.
Например, так сделано в информации о платежах (или фактах оплат) жителями за ЖКХ.
Это позволяет ускорить выборку данных и гарантировать целостность связи, но не позволяет учитывать удалённые данные из хранилища РИАС ЖКХ.
Таким образом, в любой момент времени можно получить информацию о том, сколько данных каких типов в РИАС ЖКХ синхронизировано с ГИС ЖКХ.

Отдельной трудностью является синхронизация файлов с ГИС ЖКХ.
Во-первых, файловый сервис ГИС ЖКХ или канал связи до него работает медленно как на скачивание, так и на загрузку файлов (обычно файловые сервисы работают медленно только на загрузку файлов).
Во-вторых, технология передачи файлов отличается от передачи сообщений: вместо SOAP используется REST API.
Изначально планировалось, что файлы будут передаваться прямо в SOAP-запросах~\cite{gis_doc_tff}.
Однако, данный подход является удобным только при выгрузке данных при малом объёме файлов.
В ГИС ЖКХ был реализован абсолютно иной подход, который технически является более совершенным, но накладывает некоторые сложности при его использовании.
Согласно этому подходу файлы можно обмениваться через отдельный файловый сервис, построенный по принципам REST API.
Файл можно скачать и загрузить целиком, если его объём не превышает 5 Мб.
В противном случае файл следует разбивать на части.

Однако, сложность заключается не в самом механизме обмена файлами, а в механизмах сопоставления файлов в ГИС ЖКХ и РИАС ЖКХ.
Дело в том, что файлы в РИАС ЖКХ могут храниться в двух видах: поле FileName (имя файла) целевой сущности или через единое хранилище файлов (таблица no.cmn\$File).
Любой из этих механизмов предполагает отличающиеся друг от друга способы сопоставления.
В случае с единым хранилищем файлов всё просто: создаётся расширение таблицы no.cmn\$File с ГУИД ГИС ЖКХ, и таким образом в системе возникает абсолютное сопоставление файла РИАС ЖКХ и ГИС ЖКХ.
При замене файла у целевой сущности меняется ссылка на запись из no.cmn\$File и, соответственно, изменяется и ссылка на файл в ГИС ЖКХ.
В случае же с хранением только имени файла в целевой сущности (а не ссылки на общее файловое хранилище), необходимо сопоставлять ГУИД файла ГИС ЖКХ напрямую к записи сущности (договора, дома и т.п.).
Для этих целей существует аналог таблицы fgis.GISEntityCompare, но для файлов -- fgis.GISFileCompare, в которой также есть кортеж полей, идентифицирующих запись в БД (SchemaName, TableName, LocalId).
Сложность синхронизации файлов таким методом заключается в том, что необходимо не забывать при смене файла в записи целевой сущности очищать связь с файлом в fgis.GISFileCompare, что, несомненно, может привести к десинхронизации информации о прикреплённых файлах.
Например, в РИАС ЖКХ файл заменили на новый без замены записи в fgis.GISFileCompare.
В ГИС ЖКХ новый файл не передался (ГУИД ГИС ЖКХ же у файла есть), и система считает, что всё в порядке.

\subsubsection{Пользовательский интерфейс}

Нет сомнения в том, что автоматический обмен РИАС ЖКХ с ГИС ЖКХ должен контролироваться пользователями.
Такая возможность должна быть доступна как администратору системы, так и администраторам организаций-поставщиеов инфомации в ГИС ЖКХ.

Для пользователя РИАС ЖКХ доступны следующие виды контроля за информационным обменом с ГИС ЖКХ:
\begin{easylist}
& информационная панель обмена;
& журнал обмена;
& флаг <<Синхронизирован с ГИС ЖКХ>> в некоторых таблицах и фильтрах;
& описание результата предпроверки данных для выгрузки в ГИС ЖКХ.
\end{easylist}

Информационная панель обмена помогает контролировать ход интеграции с ГИС ЖКХ в разрезе организаций (для администратора системы) и домах, закреплённых за организацией (для всех администраторов).
Примерный вид страниц со списками организаций и домов организации представлен на рисунках~\ref{img:rias-dashboard-list}~и~\ref{img:rias-dashboard-item}.

\myFigure[t]{0.9}{rias-dashboard-list}{Информационная панель обмена с ГИС ЖКХ в разрезе организаций}

\myFigure[t]{0.9}{rias-dashboard-item}{Информационная панель обмена с ГИС ЖКХ в разрезе домов} 

Журнал обмена представляет собой подробные технические сведения об обмене: сколько каких запросов было, какой ответ был получен.
Также можно просмотреть тело запроса и ответа.
Снимок экрана со списком запросов в журнале обмена с ГИС ЖКХ представлен на риснуке~\ref{img:rias-gisrequest-list}.

\myFigure[t]{0.9}{rias-gisrequest-list}{Список запросов в журнале обмена с ГИС ЖКХ}

Флаг <<Синхронизирован с ГИС ЖКХ>> помогает быстро оценить, сколько информации было синхронизировано с ГИС ЖКХ.
Его примерный вид можно видеть на рисунке~\ref{img:rias-other-issync}.

\myFigure[t]{0.9}{rias-other-issync}{Пример использования флага <<Синхронизирован с ГИС ЖКХ>> в интерфейсе РИАС ЖКХ}

Просмотр результатов предпроверки данных для синхрониазции с ГИС ЖКХ бывает полезен, если требуется узнать, чего конкретно не хватает для выгрузки какого-то объекта в ГИС ЖКХ.
Например, требуется узнать, какие данные отсутствуют для раскрытия информации о договоре упраления.
Для этого после включения необходимой настройки в конфигурации системы в подробностях каждого своего договора управления появляются подсказки, что необходимо добавить или изменить, чтобы договор был размещён в ГИС ЖКХ.
Пример такой подсказки можно видеть на рисунке~\ref{img:rias-contract-precheck}.

\myFigure[t]{0.9}{rias-contract-precheck}{Пример предпроверки договора управления}

\subsubsection{Проблемы информационного взаимодействия}

При построении информационного обмена с ГИС ЖКХ первой сложностью является проведение тестовых испытаний, по результатам который региональную систему могут допустить к промышленной эксплуатации.
Несмотря на наличие веб-интерфейса подачи заявок на такие испытания, потребуется сперва заполнить заявку на подключение системы к информационному взаимодействию с СИТ ГИС ЖКХ, а затем уведомление об окончании тестовых испытаний.
Это может сделать только руководитель организации через форму обращения в техническую поддержку ГИС ЖКХ.
После обработки уведомления специалистами технической поддержки, а затем и техническими специалистами, система допускается к промышленной эксплуатации.

Следующей трудностью является установка соединения до стендов ГИС ЖКХ.
Как упоминалось ранее, существует два вида таких площадок: тестовые и промышленная.

Доступ до промышленной площадки осуществляется по протоколу HTTPS/SSL с обязательным предоставлением клиентского сертификата по ГОСТ 34.10-2012.
Со стороны веб-сервисов ГИС ЖКХ также возвращается информация о сертификате по ГОСТ.
Для поддержки такого типа сертификатов требуется установка дополнительного платного программного обеспечения (в данном случае был выбран КрипроПРО CSP).
Дополнительно требуется установить сертификат удостоверяющего центра, выдавшего сертификат ППАК ГИС ЖКХ, в список доверенный корневых центров сертификации.

Доступ до тестовых площадок (СИТ) ГИС ЖКХ также может быть осуществлён по протоколу HTTPS/SSL, однако при обмене будут использоваться недостоверные сертификаты, так что проверку безопасности канала данных необходимо будет отключить.
Альтернативой является HTTP-соединение, в котором следует в заголовках присылать отпечаток сертификата.
Также при установке соединения с СИТ ГИС ЖКХ требуется указание простой электронной подписи при помощи basic-авторизации.
Все эти особенности накладывают дополнительные расходы на реализацию соединения до СИТ ГИС ЖКХ, так как описанные выше требования не покрываются стандартными алгоритмами установки соединения для SOAP в современных фреймворках.

Следующей сложностью является процесс обновления ГИС ЖКХ.
ППАК ГИС ЖКХ может быть выключен либо для технического обслуживания, либо для установки новой версии без изменения форматов информационного взаимодействия, либо с их изменением.

Для первого и второго случая рассылка о том, что веб-сервисы будут отключены, приходит обычно от часа до двух до намеченного срока выключения площадки.
Так как выключение происходит обычно в вечернее время, письмо об этом приходит после 6 часов вечера по времени разработчиков.
Соответственно, смысл такой рассылки теряется.

При обновлении версии ППАК ГИС ЖКХ с изменением форматов информационного обмена рассылка приходит заранее: примерно за неделю до планируемого обновления.
Однако, нередки случаи, когда обновление откладывали на срок до месяца.
В таком случае уже обновлённый модуль интеграции РИАС ЖКХ с ГИС ЖКХ откатывался до старых версий форматов обмена.
Иногда стенд СИТ-02 ГИС ЖКХ, предназначенный для проверки новых версий форматов обмена, не обновлялся своевременно, что также создавало трудности для проверки правильности интеграции.

Следующую трудность информационного обмена, которую стоит отдельно выделить, является сложность форматов информационного обмена.
Согласно целевой схеме ГИС ЖКХ, практически все виды информации являются версионными.
То есть к каждой записи есть ГУИД корневой и ГУИД версии.
Одни операции с данными требуют корневой идентификатор, другие операции -- версионный.
Также часто в запросах на выгрузку данных смешиваются операции и смена состояния записей.
К примеру, договор управления можно создать, обновить, расторгнуть, аннулировать, подать заявку на его одобрение, пролонгировать.
Прибор учёта можно создать, обновить до ввода первого показания, обновить после ввода первого показания, заменить и архивировать.
Таким образом, усложняется логика синхронизации данных РИАС ЖКХ с ГИС ЖКХ.

\subsubsection{Описание модели данных}
\label{head:software-gis-entities}

Описание основных сущностей представлено в таблице~\ref{tab:software-gis-entities}.

\begin{myTable}
\begin{longtable}[h]{|p{0.3\textwidth}|p{0.6\textwidth}|}
	\caption{\label{tab:software-gis-entities}Основные сущности логической модели данных модуля обмена РИАС ЖКХ с ГИС ЖКХ} \\
	\hline
		\thead{Название сущности} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
		Запрос & Обращение к веб-сервисам ГИС ЖКХ \\ \hline
		Сопоставление сушностей & Связь записей в РИАС ЖКХ и ГИС ЖКХ \\ \hline
		Версия сущности & Сведения о версиях сущности в ГИС ЖКХ \\ \hline
		Сопоставление файлов & Связь файлов РИАС ЖКХ и ГИС ЖКХ \\ \hline
		Адресный объект & Сведения об адресном объекте адресного плана ГИС ЖКХ \\ \hline
		Дом & Сведения о доме адресного плана ГИС ЖКХ \\ \hline
		Поставщик информации & Сводная информация по синхронизации организации с ГИС ЖКХ \\ \hline
		Объекты ПИ & Объекты поставщика информации \\ \hline
		Версия ПИ & Версия поставщика информации в ГИС ЖКХ \\ \hline
		Справочник НСИ & Нормативно-справочная информация ГИС ЖКХ \\ \hline
		Элемент справочника НСИ & Элемент нормативно-справочной информации ГИС ЖКХ \\ \hline
		Сопоставление справочников & Связь НСИ со справочниками РИАС ЖКХ \\ \hline
		Веб-сервис & Сведения о веб-сервисах ГИС ЖКХ \\ \hline
		Операция веб-сервиса & Сведения об операциях (методах) веб-сервисов ГИС ЖКХ \\ \hline
		Группа операций & Объединение операций для удобства интерфейса \\ \hline
		Тип шаблона & Сведения о шаблонах ГИС ЖКХ \\ \hline
		Связь ТШ и ПИ & Связь типа шаблона ГИС ЖКХ и поставщика информации \\ \hline
\end{longtable}
\end{myTable}

Связи основных таблиц модуля интеграции РИАС ЖКХ с ГИС ЖКХ представлены на рисунке~\ref{img:rias-gis-links}.

\myFigure[t]{0.9}{rias-gis-links}{Связи основных таблиц модуля интеграции РИАС ЖКХ с ГИС ЖКХ}

\subsubsection{Авторство}

Авторство при разработке данного программного модуля представлено в таблице~\ref{tab:software-gis-authorship}

\begin{myTable}
\begin{longtable}[h]{|p{0.45\textwidth}|p{0.45\textwidth}|}
	\caption{\label{tab:software-gis-authorship}Авторство разработки модуля обмена РИАС ЖКХ с ГИС ЖКХ} \\
	\hline
		\thead{Деятельность/Часть модуля} &
		\thead{Авторство} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
	Проектирование & Самостоятельно \\ \hline
	Обмен файлами & Самостоятельно \\ \hline
	Приём данных & Под руководством \\ \hline
	Отправка данных & Под руководством \\ \hline
	Хранилище данных & Самостоятельно \\ \hline
	Анализ и решение проблем & Под руководством \\ \hline
\end{longtable}
\end{myTable}

\subsection{Платёжный шлюз РИАС ЖКХ}

Платёжный шлюз представляет собой часть модуля интеграции РИАС ЖКХ с ГИС ЖКХ для передачи платежей (фактов оплат) и операции над ними в федеральную систему посредством информационного взаимодействия.

Шлюз состоит из нескольких частей:
\begin{easylist}
& сервер для сбора данных о платежах и операциях над ними;
& часть windows-службы модуля интеграции, обрабатывающая пришедшие данные, отправляющая пакеты платежей в ГИС ЖКХ при обрабатывающая результаты.
\end{easylist}

Сервер сбора данных представляет собой ASP.NET-приложение.
Написано с использованием технологии WebAPI.
Для доступа к данным используется Entity Framework.
При построении интерфейсов взаимодействия использует принцип REST.

Сервер сбора данных реализует следующие операции:
\begin{easylist}
& зарегистрировать платёж в собственную кассу;
& зарегистрировать платёж агента;
& аннулировать платёж;
& проверить состояние запроса.
\end{easylist}
Дополнительно для каждой операции существует групповая операция, полностью дублирующая функциональность единичного метода.

Для доступа к API следует удостовериться, что для конкретной площакди РИАС ЖКХ развёрнут сервер сбора данных о платежах и настроена связь с ГИС ЖКХ.
При отсутствии развётки она может быть осуществлена отделом поддержки Исполнителя или Заказчиком самостоятельно.
Далее необходимо передать права на раскрытие информации в ГИС ЖКХ для той информационной системы, с которой установлена связь в РИАС ЖКХ.
Если система является не муниципальной или региональной, потребуется подтверждение права передачи информации от владельца ИС в ГИС ЖКХ.
После этого следует получить ГУИД клиента API РИАС ЖКХ.
Его необходимо будет прикреплять ко всем запросам API.

Документация, ключи и конечные точки веб-сервисов регистрации платежей находятся в закрытом доступе.

На текущий момент существует ряд реализаций клиентов для сервера сбора данных о платежах: тестовый клиент от разработчиков сервера, две разработки команд компании <<АИС Город>>, как минимум одна реализация от сторонних разработчиков.

Для ускорения регистрации платежей веб-сервисом было принято решение разделить факты оплат по нескольким слабо связанным друг с другом таблицам.
В одной таблице (fgis.GISPaymentServiceLog) содержится входящая информация от веб-сервиса.
Затем оттуда windows-служба обмена при обработке платежей при помощи специальных хранимых процедур обрабатывает и заносит данные в таблицы финансовой подсистемы РИАС ЖКХ (fin.PaymentOrder и fin.RecipientInfo).
Обмен с ГИС ЖКХ происходит уже со вторым наоборот таблиц.
Таким образом, удалось отделить фронт платёжного шлюза от обработки пришедших данных, тем самым повысив отказоустойчивость системы.

\subsubsection{Описание модели данных}

Описание сущностей представлено в таблице~\ref{tab:software-gisapi-entities}.

\begin{myTable}
\begin{longtable}[h]{|p{0.3\textwidth}|p{0.6\textwidth}|}
	\caption{\label{tab:software-gisapi-entities}Сущности логической модели данных платёжного шлюза РИАС ЖКХ} \\
	\hline
		\thead{Название сущности} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
		Лог платёжного шлюза & Информация, зарегистрированная платёжным шлюзом \\ \hline
		Факт оплаты & Совершённый платёж за услуги ЖКХ \\ \hline
		Платёжные реквизиты & Платёжные реквизиты получателя платежа \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Лог платёжного шлюза] представлены в таблице~\ref{tab:software-gisapi-log}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-gisapi-log}Атрибуты сущности [Лог платёжного шлюза] и поля таблицы \{fgis.GISPaymentServiceLog\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор записи лога \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Название метода \par \{MethodName\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	Идентификатор клиента API \par \{ApiClientId\} & Числовой \par \{int\} & - \\ \hline
	Состояние записи \par \{StatusId\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор платежа \par \{PaymentOrderId\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор запроса ГИС ЖКХ \par \{GisRequestId\} & Числовой \par \{int\} & - \\ \hline
	Подробности состояния \par \{StatusDescription\} & Текстовый \par \{nvarchar(max)\} & Заполняются при ошибке \\ \hline
	ОГРН поставщика данных \par \{DataProviderOgrn\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Номер платежа \par \{OrderNumber\} & Текстовый \par \{nvarchar(64)\} & Уникальный номер из биллинговой системы \\ \hline
	Дата платежа \par \{OrderDate\} & Дата и время \par \{datetime2(0)\} & - \\ \hline
	Величина платежа \par \{OrderAmount\} & Двойной числовой \par \{bigint\} & В копейках \\ \hline
	Лицевой счёт \par \{OrderAccount\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Период оплаты \par \{OrderPeriod\} & Дата \par \{date\} & Первый день месяца \\ \hline
	Назначение платежа \par \{OrderPurpose\} & Текстовый \par \{nvarchar(1000)\} & - \\ \hline
	Произвольный комментарий \par \{OrderComment\} & Текстовый \par \{nvarchar(210)\} & - \\ \hline
	Наименование исполнителя \par \{ExecutorName\} & Текстовый \par \{nvarchar(200)\} & - \\ \hline
	Исполнитель ИП \par \{ExecutorIsIP\} & Логический \par \{bit\} & - \\ \hline
	ИНН исполнителя \par \{ExecutorInn\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	КПП исполнителя \par \{ExecutorKpp\} & Текстовый \par \{nvarchar(50)\} & Обязательно, если исполнитель не ИП \\ \hline
	Наименование получателя \par \{RecipientName\} & Текстовый \par \{nvarchar(200)\} & - \\ \hline
	ИНН получателя \par \{RecipientInn\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	БИК получателя \par \{RecipientBik\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	Банк получателя \par \{RecipientBank\} & Текстовый \par \{nvarchar(200)\} & - \\ \hline
	Расчётный счёт получателя \par \{RecipientAccount\} & Текстовый \par \{nvarchar(50)\} & Только цифры \\ \hline
	Наименование плательщика \par \{PayerName\} & Текстовый \par \{nvarchar(160)\} & - \\ \hline
	Плательщик ЮЛ \par \{PayerIsLegal\} & Логический \par \{bit\} & - \\ \hline
	ОГРН владельца ЛС \par \{AccountOwnerOrganizationOgrn\} & Текстовый \par \{nvarchar(max)\} & Заполняется только для метода SendOrderInfo \\ \hline
	ИД ЖКУ ГИС ЖКХ \par \{AccountGisServiceId\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Дата аннулирования платежа \par \{CancellationDate\} & Дата и время \par \{datetime2(0)\} & - \\ \hline
	Причина аннулирования платежа \par \{CancellationComment\} & Текстовый \par \{nvarchar(max)\} & Обязательно, если указана дата аннулирования \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибут <<Название метода>> может содержать следующие значения:
\begin{easylist}
& SendOrderInfo --- размещение платежа в собственную кассу;
& SendOrderInfoAgent --- размещение платежа через платёжного агента;
& SendOrderCancellation --- аннулирование платежа.
\end{easylist}

Атрибут <<Состояние записи>> может содержать следующие значения:
\begin{easylist}
& new -- ожидает обработки;
& success -- обработан успешно;
& error.service -- ошибка веб-серивса;
& error.rias -- ошибка РИАС ЖКХ;
& error.gis -- ошибка в ГИС ЖКХ;
& wait.rias -- ожидает отправки в ГИС ЖКХ;
& wait.gis -- ожидает ответа от ГИС ЖКХ;
& overtime -- истекло время обработки.
\end{easylist}

Атрибуты сущности [Факт оплаты] представлены в таблице~\ref{tab:software-gisapi-payorder}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-gisapi-payorder}Атрибуты сущности [Факт оплаты] и поля таблицы \{fin.PaymentOrder\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор оплаты \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор платёжных реквизитов \par \{RecipientInfoId\} & Числовой \par \{int\} & Ссылка на сущность [Платёжные реквизиты] \\ \hline
	Идентификатор поставщика данных \par \{DataProviderOrganizationId\} & Числовой \par \{int\} & Ссылка на базовый справочник РИАС ЖКХ \\ \hline
	Номер платежа \par \{OrderNumber\} & Текстовый \par \{nvarchar(64)\} & Уникальный номер из биллинговой системы \\ \hline
	Дата платежа \par \{OrderDate\} & Дата и время \par \{datetimeoffset(0)\} & С часовым поясом \\ \hline
	Период оплаты \par \{OrderPeriod\} & Дата \par \{date\} & Первый день месяца \\ \hline
	Величина платежа \par \{OrderAmount\} & Двойной числовой \par \{bigint\} & В копейках \\ \hline
	Назначение платежа \par \{OrderPurpose\} & Текстовый \par \{nvarchar(1000)\} & - \\ \hline
	Произвольный комментарий \par \{OrderComment\} & Текстовый \par \{nvarchar(210)\} & - \\ \hline
	ИД ЖКУ ГИС ЖКХ \par \{AccountGisServiceId\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	Лицевой счёт \par \{AccountNumber\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	Наименование исполнителя \par \{ExecutorName\} & Текстовый \par \{nvarchar(200)\} & - \\ \hline
	Исполнитель ИП \par \{ExecutorIsIP\} & Логический \par \{bit\} & - \\ \hline
	ИНН исполнителя \par \{ExecutorInn\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	КПП исполнителя \par \{ExecutorKpp\} & Текстовый \par \{nvarchar(50)\} & Обязательно, если исполнитель не ИП \\ \hline
	Наименование плательщика \par \{PayerName\} & Текстовый \par \{nvarchar(160)\} & - \\ \hline
	Плательщик ЮЛ \par \{PayerIsLegal\} & Логический \par \{bit\} & - \\ \hline
	Платёж отменён \par \{IsCancelled\} & Логический \par \{bit\} & - \\ \hline
	Дата аннулирования платежа \par \{CancellationDate\} & Дата и время \par \{datetime2(0)\} & - \\ \hline
	Причина аннулирования платежа \par \{CancellationComment\} & Текстовый \par \{nvarchar(max)\} & Обязательно, если указана дата аннулирования \\ \hline
	Транспортный ГУИД ГИС ЖКХ \par \{GisTransportGuid\} & ГУИД \par \{uniqueidentifier\} & - \\ \hline
	Номер платежа в ГИС ЖКХ \par \{GisOrderNumber\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	ГУИД платежа в ГИС ЖКХ \par \{GisOrderGuid\} & ГУИД \par \{uniqueidentifier\} & - \\ \hline
	Платёж отменён в ГИС ЖКХ \par \{GisIsCancelled\} & Логический \par \{bit\} & - \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Платёжные реквизиты] представлены в таблице~\ref{tab:software-gisapi-recipientinfo}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-gisapi-recipientinfo}Атрибуты сущности [Платёжные реквизиты] и поля таблицы \{fin.RecipientInfo\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор платёжных реквизитов \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	БИК получателя \par \{RecipientBik\} & Текстовый \par \{nvarchar(9)\} & - \\ \hline
	Банк получателя \par \{RecipientBank\} & Текстовый \par \{nvarchar(255)\} & - \\ \hline
	Наименование получателя \par \{RecipientName\} & Текстовый \par \{nvarchar(255)\} & - \\ \hline
	ИНН получателя \par \{RecipientInn\} & Текстовый \par \{nvarchar(20)\} & - \\ \hline
	КПП получателя \par \{RecipientKpp\} & Текстовый \par \{nvarchar(9)\} & - \\ \hline
	Расчётный счёт получателя \par \{RecipientAccount\} & Текстовый \par \{nvarchar(20)\} & Только цифры \\ \hline
	Корреспондентский счёт \par \{CorrespondentBankAccountNumber\} & Текстовый \par \{nvarchar(20)\} & Только цифры \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

\subsubsection{Авторство}

Авторство при разработке данного программного модуля представлено в таблице~\ref{tab:software-gisapi-authorship}

\begin{myTable}
\begin{longtable}[h]{|p{0.45\textwidth}|p{0.45\textwidth}|}
	\caption{\label{tab:software-gisapi-authorship}Авторство разработки платёжного шлюза РИАС ЖКХ} \\
	\hline
		\thead{Деятельность/Часть модуля} &
		\thead{Авторство} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
	Проектирование & Самостоятельно \\ \hline
	Развёртка конечных точек & Самостоятельно \\ \hline
	Разработка методов API & Самостоятельно \\ \hline
	Хранилище данных & Самостоятельно \\ \hline
	Обработка входящих данных & Самостоятельно \\ \hline
	Отправка данных в ГИС ЖКХ & Самостоятельно \\ \hline
\end{longtable}
\end{myTable}

\subsection{Модуль интеграции РИАС ЖКХ с <<АИС Город. Система начислений>>}

Интеграция РИАС ЖКХ с программным продуктом <<АИС Город. Система начислений>> (далее -- Система начислений) является примером прямого обмена между БД.
Этот метод информационного обмена применим в первую очередь потому, что и источник, и приёмник данных разрабатываются в одной организации.
К тому же, взаимодействие происходит только в одну сторону (из Системы начислений в РИАС ЖКХ), что также допускается прямым обменом между БД.

В Системе начислений реализован набор таблиц и открыт к ним доступ для хранилища данных РИАС ЖКХ.
В РИАС ЖКХ создан такой же набор таблиц с дополнительными столбцами.
Они необходимы для внутренних нужд информационной системы.

Ниже перечислены основные таблицы для прямого обмена (названия таблиц были упрощены):
\begin{easylist}
& ext.Organizations -- справочник организаций;
& ext.Services -- справочник групп услуг;
& ext.Addresses -- справочник адресов (адресный план);
& ext.Apartments -- помещения и комнаты;
& ext.Accounts -- лицевые счета;
& ext.MeteringDevices -- приборы учёта;
& ext.PaymentDocuments -- платёжные документы.
\end{easylist}
Существует ряд зависимых от представленных таблиц, которые для текущего описания не являются ключевыми.

В каждой таблице для прямого обмена должны быть определены поля:
\begin{easylist}
& RemoteId -- идентификатор записи во внешней (по отношению к РИАС ЖКХ) системе;
& Created -- дата и время создания записи;
& Updated -- дата и время обновления записи;
& IsDeleted -- флаг <<Запись является удалённой>>.
\end{easylist}

В РИАС ЖКХ к столбцам в обменных таблицах дополнительно добавляются следующие:
\begin{easylist}
& Id -- идентификатор записи в РИАС ЖКХ;
& SystemId -- идентификатор системы, откуда пришли данные;
& CheckMessage -- текст ошибки проверки данных перед их синхронизацией;
& IsProcessed -- флаг <<Запись обработана>>;
& набор иных идентификаторов РИАС ЖКХ.
\end{easylist}

Обмен данными с точки зрения источника данных (Системы начислений) выглядит следующим образом:
\begin{enumerate}
	\item Персонал даёт команду системе сформировать данные для РИАС ЖКХ.
	\item Специальный механизм обновляет и дополняет записи в обменных таблицах.
	\item Персонал вручную проверяет корректность заполненных данных в РИАС ЖКХ.
\end{enumerate}

С точки зрения приёмника данных (РИАС ЖКХ) обмен выглядит следующим образом:
\begin{enumerate}
	\item Каждую ночь (либо по запросу Заказчика) выполняется сканирование обменных таблиц связанных систем.
	\item Если какие-либо изменения были обранужены, они при помощи recieve-процедур загружаются в РИАС ЖКХ. Соответствующая запись оставляется в логе обмена.
	\item После получения всех обновлённых сведений для каждого вида информации запускаются read-процедуры, которые синхронизируют данные обменный таблиц с хранилищем данных РИАС ЖКХ. Запись об этом оставляется в логе обмена.
	\item Персонал по записям лога проверяет корректность прохождения процесса получения данных из обменных таблиц.
\end{enumerate}

Не все данные сразу могут быть добавлены в РИАС ЖКХ.
К примеру, частая ошибка обмена -- несоответствие адресных планов РИАС ЖКХ и Системы начислений.
Адресный план РИАС ЖКХ содержит ФИАС, временные адреса ГИС ЖКХ и вручную добавленная адреса через саму систему.
Адресный план Системы начислений сильно зависит от конкретной развёртки этой системы.
Соответственно, для этих целей в РИАС ЖКХ существует механизм сопоставления адресов.
Он представляет собой связь записей адресных планов внещних систем или реестров с адресным планом РИАС ЖКХ.
Если адреса отличаются так, что система сама не может принять рещение о сопоставлении записей, она предоставляет это решение экспертам.
Чаще всего в роли экспертов выступают представители Заказчика, потому что именно они заинтересованы в корректности передаваемой информации.

\subsubsection{Авторство}

Авторство при разработке данного программного модуля представлено в таблице~\ref{tab:software-sn-authorship}

\begin{myTable}
\begin{longtable}[h]{|p{0.45\textwidth}|p{0.45\textwidth}|}
	\caption{\label{tab:software-sn-authorship}Авторство разработки прямого обмена РИАС ЖКХ с Системой начислений} \\
	\hline
		\thead{Деятельность/Часть модуля} &
		\thead{Авторство} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
	Проектирование & Принимал участие \\ \hline
	Обмен реестрами & Под руководством \\ \hline
	Сопоставление адресов & Не принимал участие \\ \hline
	Проверка приходящих данных & Самостоятельно \\ \hline
	Настройка связи между СУБД & Самостоятельно \\ \hline
	Интерфейс & Принимал участие \\ \hline
\end{longtable}
\end{myTable}

\subsection{Подсистема обработки реестров РИАС ЖКХ}

Наряду с механизмами обмена при помощи API и заполнением данных при помощи интерфейса пользователя в РИАС ЖКХ существует метод массового заполнения данных через реестры.

Реестры с точки зрения РИАС ЖКХ могут быть файлы следующих типов:
\begin{easylist}
& DBF-файл в кодировке КОИ-8;
& CSV-файл в кодировке Win-1251 с разделителем <<;>> с наименованием столбцов в первой строке;
& CSV-файл в кодировке Win-1251 с разделителем <<;>> только с данными.
\end{easylist}

Реестр в РИАС ЖКХ описывается при помощи основной информации о реестре, списка столбцов и хранимой процедуры-обработчика реестра.
Более подробное описание основных сущностей по работе с реестрами можно найти в п.~\ref{head:software-ree-entities} и таблице~\ref{tab:software-ree-entities}.

Для успешного заполнения реестра РИАС ЖКХ позволяет выгрузить его шаблон.
Можно выгрузить два типа шаблонов: CSV-файл и Excel-файл.
Последний отличается наличием у каждого столбца описания, флага обязательности и списка возможных значений (если поле справочное).
Вид одного из шаблонов в формате Excel представлен на рисунке~\ref{img:rias-ree-excel}.

\myFigure[t]{0.9}{rias-ree-excel}{Вид шаблона реестра Универсальный.7 РИАС ЖКХ в Excel}

Бывают случаи, когда поставщики информации (любые участники рынка ЖКХ или Заказчик) не могут предоставить справочные данные в необходимом виде.
Например, в РИАС ЖКХ поле <<Тип помещения>> может принимать значение <<Комната в ИЖД>>, а во внешней системе этот же элемент может называться <<Комната в жилом доме>>.
Для сопоставления неопределённых значений справочных полей был разработан механизм сопоставления справочников.
Суть его работы схожа с сопоставлением адресов, который применяется для прямого обмена с Системой начислений.
Интерфейс по сопоставлению справочников представлен на рисунке~\ref{img:rias-ree-ref}.

\myFigure[t]{0.9}{rias-ree-ref}{Интерфейс по сопоставлению справочников РИАС ЖКХ}

\subsubsection{Описание модели данных}
\label{head:software-ree-entities}

Описание сущностей представлено в таблице~\ref{tab:software-ree-entities}.

\begin{myTable}
\begin{longtable}[h]{|p{0.3\textwidth}|p{0.6\textwidth}|}
	\caption{\label{tab:software-ree-entities}Сущности логической модели данных подсистемы обмена реестрами РИАС ЖКХ} \\
	\hline
		\thead{Название сущности} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
		Тип реестра & Сведения о видах реестров, доступных в РИАС ЖКХ \\ \hline
		Поля типа реестра & Набор полей у типов реестров \\ \hline
		Реестр & Сведения о загруженных реестрах в систему \\ \hline
		Строка реестра & Записи о строках реестра \\ \hline
		Сопоставление справочников & Сведения о сопоставлении значений справочных полей для каждой организации \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Тип реестра] представлены в таблице~\ref{tab:software-ree-reeType}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-ree-reeType}Атрибуты сущности [Тип реестра] и поля таблицы \{ree.ReesterType\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор типа реестра \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Код \par \{Code\} & Текстовый \par \{nvarchar(50)\} & - \\ \hline
	Наименование \par \{Name\} & Текстовый \par \{nvarchar(100)\} & - \\ \hline
	Есть расширенный обработчик \par \{IsCustomProcessor\} & Логический \par \{bit\} & Реестр обрабатывается не построчно \\ \hline
	Название обработчика \par \{ProcessProcName\} & Текстовый \par \{nvarchar(100)\} & Хранимая процедура, обрабатывающая реестр \\ \hline
	Описание \par \{Description\} & Текстовый \par \{nvarchar(1000)\} & - \\ \hline
	Является архивным \par \{IsArchived\} & Логический \par \{bit\} & - \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Поля типа реестра] представлены в таблице~\ref{tab:software-ree-reeField}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-ree-reeField}Атрибуты сущности [Поля типа реестра] и поля таблицы \{ree.ReesterField\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор поля \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор типа реестра \par \{TypeId\} & Числовой \par \{int\} & - \\ \hline
	Номер \par \{Num\} & Числовой \par \{int\} & - \\ \hline
	Является обязательным \par \{IsRequired\} & Логический \par \{bit\} & - \\ \hline
	Является информационным \par \{IsInformational\} & Логический \par \{bit\} & - \\ \hline
	Код \par \{FieldName\} & Текстовый \par \{nvarchar(256)\} & - \\ \hline
	Название \par \{FieldDisplayName\} & Текстовый \par \{nvarchar(250)\} & - \\ \hline
	Описание \par \{FieldDescription\} & Текстовый \par \{nvarchar(500)\} & - \\ \hline
	Тип данных \par \{DataType\} & Текстовый \par \{nvarchar(50)\} & В типах SQL Server 2008+ \\ \hline
	Набор возможных значений \par \{ReferenceViewName\} & Текстовый \par \{nvarchar(100)\} & Специальное представление в БД \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Реестр] представлены в таблице~\ref{tab:software-ree-reester}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-ree-reester}Атрибуты сущности [Реестр] и поля таблицы \{ree.Reester\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор реестра \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор типа реестра \par \{TypeId\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор поставщика информации \par \{OrganizationId\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор состояния \par \{StatusId\} & Числовой \par \{int\} & - \\ \hline
	Имя файла \par \{FileName\} & Текстовый \par \{nvarchar(500)\} & - \\ \hline
	Период \par \{Period\} & Дата \par \{date\} & Первый день месяца \\ \hline
	Число записей \par \{TotalRowNumber\} & Длинное целое \par \{bigint\} & - \\ \hline
	Обрабатывается \par \{IsProcessing\} & Логический \par \{bit\} & - \\ \hline
	Проверяется \par \{IsChecking\} & Логический \par \{bit\} & - \\ \hline
	Начало обработки \par \{ProcessStart\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Окончание обработки \par \{ProcessEnd\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Строка реестра] представлены в таблице~\ref{tab:software-ree-reeRecord}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-ree-reeRecord}Атрибуты сущности [Строка реестра] и поля таблицы \{ree.ReesterRecord\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор строки реестра \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор реестра \par \{ReesterId\} & Числовой \par \{int\} & - \\ \hline
	Значения столбцов \par \{Fields\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Идентификатор состояния \par \{StatusId\} & Числовой \par \{int\} & - \\ \hline
	Ошибка проверки \par \{CheckErrorMessage\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Ошибка обработки \par \{ProcessErrorMessage\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Комментарий \par \{CommentMessage\} & Текстовый \par \{nvarchar(max)\} & - \\ \hline
	Идентификатор данных \par \{DataId\} & Текстовый \par \{nvarchar(100)\} & - \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

Атрибуты сущности [Сопоставление справочников] представлены в таблице~\ref{tab:software-ree-reference}.

\begin{myTable}
\begin{longtable}[h]{|p{0.4\textwidth}|p{0.2\textwidth}|p{0.3\textwidth}|}
	\caption{\label{tab:software-ree-reference}Атрибуты сущности [Сопоставление справочников] и поля таблицы \{ree.Reference\}} \\
	\hline
		\thead{Название атрибута/поля} &
		\thead{Тип} &
		\thead{Описание} \\
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} & \theadnum{3} \\
	\hline \endhead
	Идентификатор сопоставления \par \{Id\} & Числовой \par \{int\} & - \\ \hline
	Идентификатор поля типа реестра \par \{FieldId\} & Числовой \par \{int\} & - \\ \hline
	Сопоставляемое значение \par \{Value\} & Текстовый \par \{nvarchar(1000)\} & - \\ \hline
	Значение сопоставлено \par \{IsMapped\} & Логический \par \{bit\} & - \\ \hline
	Идентификатор сопоставленной записи \par \{ReferenceValueId\} & Числовой \par \{int\} & - \\ \hline
	Ошибочное значение \par \{IsError\} & Логический \par \{bit\} & - \\ \hline
	Сопоставленное значение \par \{ReferenceValue\} & Текстовый \par \{nvarchar(200)\} & - \\ \hline
	Идентификатор поставщика информации \par \{DataProviderOrgId\} & Числовой \par \{int\} & - \\ \hline
	Дата и время создания записи \par \{Created\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
	Дата и время обновления записи \par \{Updated\} & Дата и время \par \{datetimeoffset(2)\} & Включает часовой пояс \\ \hline
\end{longtable}
\end{myTable}

\subsubsection{Авторство}

Авторство при разработке данного программного модуля представлено в таблице~\ref{tab:software-ree-authorship}

\begin{myTable}
\begin{longtable}[h]{|p{0.45\textwidth}|p{0.45\textwidth}|}
	\caption{\label{tab:software-ree-authorship}Авторство разработки подсистемы обмена реестрами РИАС ЖКХ} \\
	\hline
		\thead{Деятельность/Часть модуля} &
		\thead{Авторство} \\
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endfirsthead
	\hline
		\theadnum{1} & \theadnum{2} \\
	\hline \endhead
	Проектирование & Не принимал участия \\ \hline
	Написание обработчиков реестров & Принимал участие \\ \hline
	Сопоставление справочников & Принимал участие \\ \hline
	Автоматизация обработки & Под руководством \\ \hline
	Интерфейс & Принимал участие \\ \hline
\end{longtable}
\end{myTable}

\clearpage
\newpage